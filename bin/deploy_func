#!/bin/bash
set -e

#
# Deploys the function app code to the function app.
#
# USAGE
#   ./bin/deploy_func <function_app_name>
#
# ARGUMENTS
#   - function_app_name: The name of the function app to deploy to.
#

# Check if the correct number of arguments were provided.
if [ "$#" -ne 1 ]; then
    echo "Usage: ./bin/deploy_func <function_app_name>"
    exit 1
fi

# Get the arguments.
function_app_name=$1

# Deploy the function app code.
(cd api && npm install && npm run build:production)
(cd api && func azure functionapp publish "$function_app_name" --javascript)