---

import { profileConfig } from "../config";
import { url } from "../utils/url-utils";

const currentYear = new Date().getFullYear();
---

<!--<div class="border-t border-[var(&#45;&#45;primary)] mx-16 border-dashed py-8 max-w-[var(&#45;&#45;page-width)] flex flex-col items-center justify-center px-6">-->
<div class="transition border-t border-black/10 dark:border-white/15 my-10 border-dashed mx-32"></div>
<!--<div class="transition bg-[oklch(92%_0.01_var(&#45;&#45;hue))] dark:bg-black rounded-2xl py-8 mt-4 mb-8 flex flex-col items-center justify-center px-6">-->
<div class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] dark:border-white/15 rounded-2xl mb-12 flex flex-col items-center justify-center px-6">
    <div class="transition text-50 text-sm text-center">
        &copy; <span id="copyright-year">{currentYear}</span> {profileConfig.name}. All Rights Reserved. <br>
        Powered by
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://astro.build">Astro</a> &
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/saicaca/fuwari">Fuwari</a> &
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/sagesta">Samuel T. Adebodun</a>
        <br>
        <span id="visitor-counter" class="text-xs text-black/50 dark:text-white/50 mt-2">Loading visitors...</span>
    </div>

<script>
    async function updateVisitorCount() {
        try {
            const response = await fetch('/api/visitorCount');
            if (response.ok) {
                const data = await response.json();
                const counterElement = document.getElementById('visitor-counter');
                if (counterElement && data.count) {
                    counterElement.innerText = `Visitor #${data.count}`;
                }
            }
        } catch (error) {
            console.error('Failed to fetch visitor count:', error);
        }
    }

    updateVisitorCount();
</script>
</div>